当前步骤是设计并实现数据收集模块，用于从聊天记录、好友备注和互动历史中提取数据。该模块是构建RAG知识库的基础，需要高效、安全地从多个数据源收集数据。具体需求如下：

1. **输入**：
   - 聊天记录：从MySQL数据库中的chatRecord表获取
   - 好友备注：从用户表的nickName字段获取
   - 互动历史：包括好友添加记录、聊天频率等
   - 用户信息：包括用户ID、用户名、头像等

2. **处理**：
   - 使用Prisma ORM高效查询MySQL数据库
   - 实现分页查询机制处理大数据量
   - 对敏感信息进行脱敏处理
   - 使用Redis缓存频繁访问的数据
   - 确保数据实时同步，建立数据变更监听机制

3. **输出**：
   - 结构化的用户社交数据集合
   - 数据质量报告（完整性、准确性）
   - 数据隐私处理日志

4. **技术实现**：
   - 使用NestJS框架构建模块化服务
   - 通过Prisma实现高效数据库查询
   - 利用Redis缓存优化性能
   - 实现JWT鉴权确保数据安全

5. **与其他模块的关系**：
   - 为数据预处理模块提供原始数据
   - 依赖用户认证服务获取合法访问权限
   - 为RAG系统提供知识库基础数据

6. **关键考量**：
   - 性能：大数据量下的查询优化
   - 安全：用户隐私数据保护
   - 实时性：数据变更的及时同步
   - 可扩展性：支持未来新增数据源

7. **验收标准**：
   - 能完整收集所有指定数据源的信息
   - 在100万条记录下查询响应时间<500ms
   - 敏感字段100%脱敏处理
   - 数据变更能在5分钟内同步到知识库